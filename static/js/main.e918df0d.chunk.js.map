{"version":3,"sources":["lib/editDistance.ts","lib/state.ts","lib/index.tsx","RotatingDemo.tsx","BitcoinDemo.tsx","TextInput.tsx","ConfirmDemo.tsx","SeussDemo.tsx","App.tsx","serviceWorker.js","index.tsx"],"names":["EditType","getEdits","s1","s2","distances","edits","i","length","j","push","type","REPLACE","position","token","DELETE","Error","INSERT","readEditsFromTable","l1","l2","width","height","value","result","Array","make2dArray","Math","min","computeEditDistanceTable","transformTo","state","s","tokens","map","t","join","getText","slice","nextKey","forEach","edit","splice","key","applyEdits","Resentence","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","ghostRef","createRef","handleVisibilityChange","syncTokens","tokenState","children","split","c","renderedText","undefined","tokenPositions","document","addEventListener","removeEventListener","_this2","_this$props","className","_this$state","react_default","a","createElement","style","PARENT_STYLE","ref","GHOST_STYLE","web","native","items","keys","getKey","initial","from","opacity","transform","enter","leave","_ref","transitionProps","index","indexOfKey","to","marginLeft","x","marginTop","y","springProps","div","objectSpread","CHILD_STYLE","_this$state2","hidden","getTokenPositions","setState","_this3","current","_","getTokenPosition","range","createRange","textNode","childNodes","setStart","setEnd","tokenRect","getBoundingClientRect","parentRect","parentCenterX","left","top","PureComponent","color","pointerEvents","userSelect","RotatingDemo","restartInterval","oldProps","interval","window","clearInterval","intervalId","entries","lib_Resentence","classNames","_this$props2","setInterval","PRICES","INTERVAL","BitcoinDemo","RotatingDemo_RotatingDemo","TextInput","handleChange","event","onChange","currentTarget","handleKeyPress","charCode","onSubmit","placeholder","inputGroup","onKeyPress","ConfirmDemo","handleInputChange","inputText","handleUpdate","prevState","text","trim","initialText","controlGroup","fill","TextInput_TextInput","buttons","Classes","FIXED","disabled","intent","Intent","PRIMARY","onClick","LINES","SeussDemo","App","DARK","href","BitcoinDemo_BitcoinDemo","target","ConfirmDemo_ConfirmDemo","Component","Boolean","location","hostname","match","onFontLoadDone","ReactDOM","render","src_App_0","getElementById","FocusStyleManager","onlyShowFocusOnTabs","WebFont","load","google","families","active","inactive","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e918df0d.chunk.js","sourcesContent":["export enum EditType {\n  INSERT = \"INSERT\",\n  REPLACE = \"REPLACE\",\n  DELETE = \"DELETE\",\n}\n\nexport type Edit = InsertEdit | ReplaceEdit | DeleteEdit;\n\nexport interface InsertEdit {\n  type: EditType.INSERT;\n  position: number;\n  token: string;\n}\n\nexport interface ReplaceEdit {\n  type: EditType.REPLACE;\n  position: number;\n  token: string;\n}\n\nexport interface DeleteEdit {\n  type: EditType.DELETE;\n  position: number;\n}\n\nexport function getEdits(s1: string, s2: string): Edit[] {\n  const distances = computeEditDistanceTable(s1, s2);\n  return readEditsFromTable(s1, s2, distances);\n}\n\nfunction computeEditDistanceTable(s1: string, s2: string): number[][] {\n  const l1 = s1.length;\n  const l2 = s2.length;\n  const distances = make2dArray(l1 + 1, l2 + 1, 0);\n  for (let i = 1; i <= l1; i++) {\n    distances[i][0] = i;\n  }\n  for (let j = 1; j <= l2; j++) {\n    distances[0][j] = j;\n  }\n  for (let i = 1; i <= l1; i++) {\n    for (let j = 1; j <= l2; j++) {\n      if (s1[i - 1] === s2[j - 1]) {\n        distances[i][j] = distances[i - 1][j - 1];\n      } else {\n        distances[i][j] =\n          1 +\n          Math.min(\n            distances[i - 1][j - 1],\n            distances[i - 1][j],\n            distances[i][j - 1],\n          );\n      }\n    }\n  }\n  return distances;\n}\n\nfunction readEditsFromTable(\n  s1: string,\n  s2: string,\n  distances: number[][],\n): Edit[] {\n  const edits: Edit[] = [];\n  let i = s1.length;\n  let j = s2.length;\n  while (i > 0 || j > 0) {\n    if (i > 0 && j > 0 && s1[i - 1] === s2[j - 1]) {\n      i--;\n      j--;\n    } else if (\n      i > 0 &&\n      j > 0 &&\n      distances[i][j] === distances[i - 1][j - 1] + 1\n    ) {\n      edits.push({ type: EditType.REPLACE, position: i - 1, token: s2[j - 1] });\n      i--;\n      j--;\n    } else if (i > 0 && distances[i][j] === distances[i - 1][j] + 1) {\n      edits.push({ type: EditType.DELETE, position: i - 1 });\n      i--;\n    } else if (j > 0 && distances[i][j] === distances[i][j - 1] + 1) {\n      edits.push({ type: EditType.INSERT, position: i, token: s2[j - 1] });\n      j--;\n    } else {\n      throw new Error(\"Invalid distances table\");\n    }\n  }\n  return edits;\n}\n\nfunction make2dArray<T>(width: number, height: number, value: T): T[][] {\n  const result: T[][] = Array(width);\n  for (let i = 0; i < width; i++) {\n    result[i] = Array(height);\n    for (let j = 0; j < height; j++) {\n      result[i][j] = value;\n    }\n  }\n  return result;\n}\n","import { Edit, EditType, getEdits } from \"./editDistance\";\n\nexport interface TokenState {\n  tokens: KeyedToken[];\n  nextKey: number;\n}\n\nexport interface KeyedToken {\n  key: number;\n  token: string;\n}\n\nexport function makeTokenState(s: string): TokenState {\n  const tokens = s.split(\"\").map((c, i) => ({ key: i, token: c }));\n  return { tokens, nextKey: s.length };\n}\n\nexport function transformTo(state: TokenState, s: string): TokenState {\n  const edits = getEdits(getText(state), s);\n  return applyEdits(state, edits);\n}\n\nexport function getText(state: TokenState): string {\n  return state.tokens.map(t => t.token).join(\"\");\n}\n\nfunction applyEdits(state: TokenState, edits: Edit[]): TokenState {\n  // This runs in quadratic time, but since computing the edits takes\n  // quadratic time anyways it's not important to optimize.\n  if (edits.length === 0) {\n    return state;\n  }\n  const tokens = state.tokens.slice();\n  let { nextKey } = state;\n  edits.forEach(edit => {\n    switch (edit.type) {\n      case EditType.INSERT: {\n        const { position, token } = edit;\n        tokens.splice(position, 0, { token, key: nextKey++ });\n        break;\n      }\n      case EditType.REPLACE: {\n        const { position, token } = edit;\n        tokens.splice(position, 1, { token, key: nextKey++ });\n        break;\n      }\n      case EditType.DELETE: {\n        const { position } = edit;\n        tokens.splice(position, 1);\n        break;\n      }\n      default:\n        ((_: never) => 0)(edit);\n    }\n  });\n  return { tokens, nextKey };\n}\n","import React, { createRef, CSSProperties, PureComponent } from \"react\";\nimport { animated, Spring, Transition } from \"react-spring\";\nimport { KeyedToken, makeTokenState, TokenState, transformTo } from \"./state\";\n\nexport interface Props {\n  className?: string;\n  children: string;\n}\n\ninterface State {\n  tokenState: TokenState;\n  renderedText: string | undefined;\n  tokenPositions: Position[];\n}\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\nexport default class Resentence extends PureComponent<Props, State> {\n  private ghostRef = createRef<HTMLDivElement>();\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tokenState: makeTokenState(props.children),\n      renderedText: undefined,\n      tokenPositions: [],\n    };\n  }\n\n  public componentDidMount(): void {\n    this.syncTokens();\n    document.addEventListener(\"visibilitychange\", this.handleVisibilityChange);\n  }\n\n  public componentDidUpdate(): void {\n    this.syncTokens();\n  }\n\n  public componentWillUnmount(): void {\n    document.removeEventListener(\n      \"visibilitychange\",\n      this.handleVisibilityChange,\n    );\n  }\n\n  public render(): JSX.Element {\n    const { className, children } = this.props;\n    const { tokenState, tokenPositions } = this.state;\n    return (\n      <div className={className} style={PARENT_STYLE}>\n        <div ref={this.ghostRef} style={GHOST_STYLE}>\n          {children}\n        </div>\n        {tokenPositions.length > 0 && (\n          <Transition\n            native={true}\n            items={tokenState.tokens}\n            keys={getKey}\n            initial={null}\n            from={{ opacity: 0, transform: \"scale(0)\" }}\n            enter={{ opacity: 1, transform: \"scale(1)\" }}\n            leave={{ opacity: 0, transform: \"scale(0)\" }}\n          >\n            {({ key, token }) => transitionProps => {\n              const index = this.indexOfKey(key);\n              return (\n                <Spring\n                  native={true}\n                  to={\n                    index != null\n                      ? {\n                          marginLeft: tokenPositions[index].x,\n                          marginTop: tokenPositions[index].y,\n                        }\n                      : {}\n                  }\n                >\n                  {springProps => (\n                    <animated.div\n                      style={{\n                        ...CHILD_STYLE,\n                        ...transitionProps,\n                        ...springProps,\n                      }}\n                    >\n                      {token}\n                    </animated.div>\n                  )}\n                </Spring>\n              );\n            }}\n          </Transition>\n        )}\n      </div>\n    );\n  }\n\n  private syncTokens(): void {\n    const { children } = this.props;\n    const { tokenState, renderedText } = this.state;\n    if (!document.hidden && children !== renderedText) {\n      const tokenPositions = this.getTokenPositions();\n      if (tokenPositions) {\n        this.setState({\n          tokenPositions,\n          tokenState: transformTo(tokenState, children),\n          renderedText: children,\n        });\n      }\n    }\n  }\n\n  private indexOfKey(key: number): number | undefined {\n    const { tokens } = this.state.tokenState;\n    for (let i = 0, length = tokens.length; i < length; i++) {\n      if (tokens[i].key === key) {\n        return i;\n      }\n    }\n    return undefined;\n  }\n\n  private getTokenPositions(): Position[] | undefined {\n    const { children } = this.props;\n    const div = this.ghostRef.current;\n    if (!div) {\n      return undefined;\n    }\n    return children.split(\"\").map((_, i) => this.getTokenPosition(div, i));\n  }\n\n  private getTokenPosition(div: HTMLDivElement, index: number): Position {\n    const range = document.createRange();\n    const textNode = div.childNodes[0];\n    range.setStart(textNode, index);\n    range.setEnd(textNode, index + 1);\n    const tokenRect = range.getBoundingClientRect();\n    const parentRect = div.getBoundingClientRect();\n    const parentCenterX = parentRect.left + parentRect.width / 2;\n    return {\n      x: tokenRect.left - parentCenterX,\n      y: tokenRect.top - parentRect.top,\n    };\n  }\n\n  private handleVisibilityChange = (): void => {\n    this.syncTokens();\n  };\n}\n\nfunction getKey(token: KeyedToken): number {\n  return token.key;\n}\n\nconst PARENT_STYLE: CSSProperties = { position: \"relative\" };\nconst GHOST_STYLE: CSSProperties = { color: \"transparent\" };\nconst CHILD_STYLE: CSSProperties = {\n  position: \"absolute\",\n  left: \"50%\",\n  top: 0,\n  pointerEvents: \"none\",\n  userSelect: \"none\",\n};\n","import classNames from \"classnames\";\nimport React, { PureComponent } from \"react\";\nimport Resentence from \"./lib/index\";\n\ninterface Props {\n  className?: string;\n  entries: string[];\n  interval: number;\n}\n\ninterface State {\n  index: number;\n}\n\nexport default class RotatingDemo extends PureComponent<Props, State> {\n  public readonly state: State = { index: 0 };\n  private intervalId: number | undefined;\n\n  public componentDidMount(): void {\n    this.restartInterval();\n  }\n\n  public componentDidUpdate(oldProps: Props): void {\n    if (oldProps.interval !== this.props.interval) {\n      this.restartInterval();\n    }\n  }\n\n  public componentWillUnmount(): void {\n    window.clearInterval(this.intervalId);\n  }\n\n  public render(): JSX.Element | null {\n    const { className, entries } = this.props;\n    const { index } = this.state;\n    if (entries.length === 0) {\n      return null;\n    }\n    return (\n      <Resentence className={classNames(\"demo-readout\", className)}>\n        {entries[index % entries.length]}\n      </Resentence>\n    );\n  }\n\n  private restartInterval(): void {\n    const { entries, interval } = this.props;\n    window.clearInterval(this.intervalId);\n    this.intervalId = window.setInterval(\n      () =>\n        this.setState(({ index }) => ({ index: (index + 1) % entries.length })),\n      interval,\n    );\n  }\n}\n","import classNames from \"classnames\";\nimport React from \"react\";\nimport \"./BitcoinDemo.scss\";\nimport RotatingDemo from \"./RotatingDemo\";\n\ninterface Props {\n  className?: string;\n}\n\nconst PRICES = [\n  \"$6,440.97\",\n  \"$10,198.60\",\n  \"$14,112.20\",\n  \"$10,237.30\",\n  \"$10,385.00\",\n  \"$7,003.06\",\n  \"$9,251.47\",\n  \"$7,500.70\",\n  \"$6,411.68\",\n];\n\nconst INTERVAL = 1250;\n\nexport default function BitcoinDemo({ className }: Props): JSX.Element {\n  return (\n    <div className={classNames(\"bitcoin-demo-container\", className)}>\n      <RotatingDemo\n        className=\"bitcoin-demo-readout\"\n        entries={PRICES}\n        interval={INTERVAL}\n      />\n    </div>\n  );\n}\n","import { InputGroup } from \"@blueprintjs/core\";\nimport React, { ChangeEvent, KeyboardEvent, PureComponent } from \"react\";\n\ninterface Props {\n  className?: string;\n  value: string;\n  placeholder?: string;\n  onChange(value: string): void;\n  onSubmit?(): void;\n}\n\nexport default class TextInput extends PureComponent<Props> {\n  public render(): JSX.Element {\n    const { className, value, placeholder, onSubmit } = this.props;\n    return (\n      <InputGroup\n        className={className}\n        value={value}\n        placeholder={placeholder}\n        onChange={this.handleChange}\n        onKeyPress={this.handleKeyPress}\n      />\n    );\n  }\n\n  private handleChange = (event: ChangeEvent<HTMLInputElement>): void =>\n    this.props.onChange(event.currentTarget.value);\n\n  private handleKeyPress = (event: KeyboardEvent<HTMLInputElement>): void => {\n    if (event.charCode === 13 && this.props.onSubmit) {\n      this.props.onSubmit();\n    }\n  };\n}\n","import { Button, Classes, ControlGroup, Intent } from \"@blueprintjs/core\";\nimport classNames from \"classnames\";\nimport React, { PureComponent } from \"react\";\nimport \"./ConfirmDemo.scss\";\nimport Resentence from \"./lib/index\";\nimport TextInput from \"./TextInput\";\n\ninterface Props {\n  className?: string;\n  initialText: string;\n}\n\ninterface State {\n  text: string;\n  inputText: string;\n}\n\nexport default class ConfirmDemo extends PureComponent<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    const { initialText } = props;\n    this.state = { text: initialText, inputText: initialText };\n  }\n\n  public render(): JSX.Element {\n    const { className } = this.props;\n    const { text, inputText } = this.state;\n    return (\n      <div className={classNames(\"confirm-demo\", className)}>\n        <Resentence className=\"demo-readout\">{text}</Resentence>\n        <ControlGroup className=\"controls\" fill={true}>\n          <TextInput\n            className=\"input\"\n            value={inputText}\n            placeholder=\"Enter text and press Update…\"\n            onChange={this.handleInputChange}\n            onSubmit={this.handleUpdate}\n          />\n          <Button\n            className={Classes.FIXED}\n            disabled={!inputText.trim()}\n            text=\"Update\"\n            intent={Intent.PRIMARY}\n            onClick={this.handleUpdate}\n          />\n        </ControlGroup>\n      </div>\n    );\n  }\n\n  private handleInputChange = (inputText: string): void =>\n    this.setState({ inputText });\n\n  private handleUpdate = (): void => {\n    this.setState(prevState => {\n      const text = prevState.inputText.trim();\n      return text ? { text, inputText: text } : null;\n    });\n  };\n}\n","import React from \"react\";\nimport RotatingDemo from \"./RotatingDemo\";\n\ninterface Props {\n  className?: string;\n}\n\nconst LINES = [\n  \"One fish\",\n  \"Two fish\",\n  \"Red fish\",\n  \"Blue fish.\",\n  \"Black fish\",\n  \"Blue fish\",\n  \"Old fish\",\n  \"New fish.\",\n  \"This one has a little star.\",\n  \"This one has a little car.\",\n  \"Say! What a lot\",\n  \"Of fish there are.\",\n  \"Yes. Some are red.\",\n  \"And some are blue.\",\n  \"Some are old.\",\n  \"And some are new.\",\n  \"Some are sad.\",\n  \"And some are glad.\",\n  \"And some are very, very bad.\",\n  // Repeat last line so it displays twice as long.\n  \"And some are very, very bad.\",\n];\n\nconst INTERVAL = 1250;\n\nexport default function SeussDemo({ className }: Props): JSX.Element {\n  return (\n    <RotatingDemo className={className} entries={LINES} interval={INTERVAL} />\n  );\n}\n","import { Classes } from \"@blueprintjs/core\";\nimport classNames from \"classnames\";\nimport React, { Component } from \"react\";\nimport \"./App.scss\";\nimport BitcoinDemo from \"./BitcoinDemo\";\nimport ConfirmDemo from \"./ConfirmDemo\";\nimport SeussDemo from \"./SeussDemo\";\n\nclass App extends Component {\n  public render() {\n    return (\n      <div className={classNames(Classes.DARK, \"app\")}>\n        <h1 className=\"app-title\">Resentence</h1>\n        <p className=\"app-explanation\">\n          Easy-to-use React component for morphing one string into another.{\" \"}\n          <a href=\"https://github.com/dphilipson/resentence\">GitHub</a>\n        </p>\n        <SeussDemo className=\"app-seuss-demo\" />\n        <h3 className=\"app-section-header\">\n          Smoothly transition text in any style\n        </h3>\n        <p className=\"app-section-body\">\n          Use ordinary CSS to layout and style your text however you want, then\n          wrap it in a Resentence component to animate its changes. Note the\n          right-alignment in the following example, which works well for\n          displaying numbers.\n        </p>\n        <BitcoinDemo className=\"app-bitcoin-demo\" />\n        <p className=\"app-bitcoin-explanation\">\n          Monthly Bitcoin prices, Nov 2017 — Jul 2018\n        </p>\n        <h3 className=\"app-section-header\">Display updates intuitively</h3>\n        <p className=\"app-section-body\">\n          Resentence will find the transformation from one string to the next\n          which uses the fewest edits (as defined by{\" \"}\n          <a\n            href=\"https://en.wikipedia.org/wiki/Levenshtein_distance\"\n            target=\"_blank\"\n          >\n            Levenschtein distance\n          </a>\n          ), then animate those edits in a visually intuitive way. You can\n          experiment with different edit types using the interactive demo below.\n        </p>\n        <ConfirmDemo className=\"app-confirm-demo\" initialText=\"Edit me…\" />\n        <h3 className=\"app-section-header\">Simple to use</h3>\n        <p className=\"app-section-body\">\n          Using Resentence is as easy as wrapping your text in a{\" \"}\n          <code>&lt;Resentence&gt;</code> component, with no additional\n          integration required.{\" \"}\n          <a href=\"https://github.com/dphilipson/resentence\">\n            See the GitHub repo\n          </a>{\" \"}\n          for details.\n        </p>\n        <p className=\"app-section-body app-copyright\">\n          Copyright © 2019 David Philipson\n        </p>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\n// tslint:disable\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit http://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See http://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { FocusStyleManager } from \"@blueprintjs/core\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport WebFont from \"webfontloader\";\nimport App from \"./App\";\nimport \"./index.scss\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nFocusStyleManager.onlyShowFocusOnTabs();\nWebFont.load({\n  google: { families: [\"Noto Sans\", \"Open Sans\"] },\n  active: onFontLoadDone,\n  inactive: onFontLoadDone,\n});\n\nfunction onFontLoadDone(): void {\n  ReactDOM.render(<App />, document.getElementById(\"root\"));\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}